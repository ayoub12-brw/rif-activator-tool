#!/bin/bash
# ๐ RiF Activator A12+ - ูุดุฑ ุงูุชุญุฏูุซุงุช ุงูุณุฑูุน

echo "๐ ุจุฏุก ูุดุฑ ุงูุชุญุฏูุซุงุช..."

# ุงูุชุฃูุฏ ูู ุฃููุง ูู ุงููุฌูุฏ ุงูุตุญูุญ
if [ ! -f "app_simple.py" ]; then
    echo "โ ุฎุทุฃ: ูุง ูููู ุงูุนุซูุฑ ุนูู app_simple.py"
    echo "ุชุฃูุฏ ูู ุฃูู ูู ูุฌูุฏ ุงููุดุฑูุน ุงูุตุญูุญ"
    exit 1
fi

echo "๐ ุงูุชุญูู ูู ุงููููุงุช ุงูููุญุฏููุซุฉ..."
git status --porcelain

echo ""
read -p "ูู ุชุฑูุฏ ุงููุชุงุจุนุฉ ูุน ุงููุดุฑุ (y/N): " -n 1 -r
echo ""

if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo "โ ุชู ุฅูุบุงุก ุงููุดุฑ"
    exit 1
fi

echo "๐ฆ ุฅุถุงูุฉ ุงููููุงุช ุงูููุญุฏููุซุฉ..."
git add .

echo "๐ฌ ูุชุงุจุฉ ุฑุณุงูุฉ ุงูุชุญุฏูุซ..."
COMMIT_MSG="โจ ุชุญุฏูุซุงุช ุงููุดุฑ: ุฅุถุงูุฉ ุตูุญุงุช ุงุฎุชุจุงุฑ ุงููุดุฑ ูุชุญุณูู ุงูุชูุฌูู

- ุฅุถุงูุฉ ุตูุญุฉ deployment-success.html ูุชุฃููุฏ ูุฌุญ ุงููุดุฑ
- ุฅุถุงูุฉ ุตูุญุฉ test-deployment.html ูุงุฎุชุจุงุฑ ุดุงูู  
- ุฅุถุงูุฉ deployment_test.py ููุญุต ุฌููุน ุงููุณุงุฑุงุช
- ุชุญุฏูุซ sitemap.html ูุชุดูู ุงูุตูุญุงุช ุงูุฌุฏูุฏุฉ
- ุชุญุณูู ุฅุญุตุงุฆูุงุช ุฎุฑูุทุฉ ุงููููุน
- ุฅุถุงูุฉ routes ุฌุฏูุฏุฉ ูู app_simple.py
- ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุนูู Render"

git commit -m "$COMMIT_MSG"

if [ $? -ne 0 ]; then
    echo "โ ุฎุทุฃ ูู ุฅูุดุงุก commit"
    exit 1
fi

echo "๐ ุฑูุน ุงูุชุญุฏูุซุงุช ุฅูู GitHub..."
git push origin main

if [ $? -eq 0 ]; then
    echo ""
    echo "โ ุชู ุงููุดุฑ ุจูุฌุงุญ!"
    echo "๐ ุงูุชุญุฏูุซุงุช ููุฌูุฏุฉ ุงูุขู ุนูู:"
    echo "   ๐ฑ GitHub: https://github.com/YOUR_USERNAME/rif-activator-tool"
    echo "   ๐ Render: https://rif-activator-tool.onrender.com"
    echo ""
    echo "๐งช ููููู ุงูุขู ุงุฎุชุจุงุฑ ุงููุดุฑ ุจุงุณุชุฎุฏุงู:"
    echo "   python deployment_test.py https://rif-activator-tool.onrender.com"
    echo ""
    echo "๐ ุงูุตูุญุงุช ุงูุฌุฏูุฏุฉ:"
    echo "   ๐ /deployment-success - ุตูุญุฉ ุชุฃููุฏ ุงููุดุฑ"
    echo "   ๐งช /test-deployment - ุตูุญุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ"
    echo ""
else
    echo "โ ุฎุทุฃ ูู ุงูุฑูุน ุฅูู GitHub"
    echo "ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช ูุตูุงุญูุงุช Git"
    exit 1
fi