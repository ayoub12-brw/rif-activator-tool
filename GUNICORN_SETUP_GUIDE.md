# ๐ ุฏููู ุฅุนุฏุงุฏ Gunicorn ูุน RiF Activator A12+

## ๐ค ูุง ูู Gunicornุ

**Gunicorn** (Green Unicorn) ูู ุฎุงุฏู HTTP WSGI ููุชุทุจููุงุช Pythonุ ูุตูู ููุฅูุชุงุฌ ูููุณ ููุชุทููุฑ ุงููุญูู.

### ๐ฅ ุงููููุฒุงุช:
- **ุฃุฏุงุก ุนุงูู** - ูุฏุนู ุนุฏุฉ ุนูููุงุช ูุชูุงุฒูุฉ
- **ุงุณุชูุฑุงุฑ** - ูุตูู ููุฅูุชุงุฌ
- **ูุฑููุฉ** - ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต
- **ุฃูุงู** - ุญูุงูุฉ ุฃูุถู ูู ุฎุงุฏู Flask ุงููุฏูุฌ

## ๐ ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง:

### 1. `wsgi.py` - ููุทุฉ ุฏุฎูู WSGI
```python
from app_simple import app
application = app  # ุงููุชุบูุฑ ุงูุฐู ูุจุญุซ ุนูู Gunicorn
```

### 2. `gunicorn_config.py` - ุฅุนุฏุงุฏุงุช Gunicorn
- ุนุฏุฏ ุงูุนูููุงุช (Workers)
- ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ
- ุฅุนุฏุงุฏุงุช ุงูุฃูุงู
- ุฅุนุฏุงุฏุงุช ุงูุณุฌูุงุช

### 3. `Procfile` ุงููุญุฏุซ
```
web: gunicorn --config gunicorn_config.py wsgi:application
```

## ๐๏ธ ุทุฑู ุชุดุบูู Gunicorn:

### 1. ุงูุทุฑููุฉ ุงูุจุณูุทุฉ:
```bash
gunicorn wsgi:application
```

### 2. ูุน ุชุญุฏูุฏ ุงููููุฐ:
```bash
gunicorn --bind 0.0.0.0:5000 wsgi:application
```

### 3. ูุน ููู ุงูุฅุนุฏุงุฏุงุช (ููุตู ุจู):
```bash
gunicorn --config gunicorn_config.py wsgi:application
```

### 4. ูุน ุฅุนุฏุงุฏุงุช ูุฎุตุตุฉ:
```bash
gunicorn --workers 4 --bind 0.0.0.0:5000 --timeout 30 wsgi:application
```

## ๐ง ุฅุนุฏุงุฏุงุช Gunicorn ุงููููุฉ:

### ุนุฏุฏ ุงูุนูููุงุช (Workers):
```python
# ุงููุงุนุฏุฉ ุงูุนุงูุฉ: (ุนุฏุฏ ุงููุนุงูุฌุงุช ร 2) + 1
workers = (multiprocessing.cpu_count() * 2) + 1
```

### ุงูุฑุจุท (Binding):
```python
# ููุงุณุชุฎุฏุงู ุงููุญูู
bind = "127.0.0.1:5000"

# ูููุดุฑ (ูุณูุญ ุจุงูุงุชุตุงู ุงูุฎุงุฑุฌู)
bind = "0.0.0.0:5000"

# ูู ูุชุบูุฑ ุงูุจูุฆุฉ (ููุณุญุงุจุฉ)
bind = f"0.0.0.0:{os.environ.get('PORT', '5000')}"
```

### ุงููููุฉ ุงูุฒูููุฉ (Timeout):
```python
timeout = 30  # ุซุงููุฉ ูุจู ูุชู ุงูุนูููุฉ ุงููุนููุฉ
```

## ๐ ููุงุฑูุฉ ุงูุฃุฏุงุก:

| ุงูุฎุงุฏู | ุงูุงุณุชุฎุฏุงู | ุงูุฃุฏุงุก | ุงูุงุณุชูุฑุงุฑ |
|--------|-----------|---------|-----------|
| Flask Dev Server | ุชุทููุฑ | ููุฎูุถ | ุถุนูู |
| Gunicorn | ุฅูุชุงุฌ | ุนุงูู | ููุชุงุฒ |
| uWSGI | ุฅูุชุงุฌ | ุนุงูู ุฌุฏุงู | ููุชุงุฒ |

## ๐ ููุงุฎุชุจุงุฑ ุงููุญูู ูุน Gunicorn:

### 1. ุชุซุจูุช Gunicorn:
```bash
pip install gunicorn
```

### 2. ุงุฎุชุจุงุฑ ุงูุชุดุบูู:
```bash
cd "c:\Users\ayoub\OneDrive\Bureau\rif-activator tool"
gunicorn --config gunicorn_config.py wsgi:application
```

### 3. ุงููุตูู ููุชุทุจูู:
```
http://localhost:5000
```

## ๐ ูููุดุฑ ุนูู Render:

### ุฅุนุฏุงุฏุงุช Render:
```yaml
Build Command: pip install -r requirements_render.txt
Start Command: gunicorn --config gunicorn_config.py wsgi:application
```

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ:
- `PORT`: ูุชู ุชุนูููู ุชููุงุฆูุงู ุจูุงุณุทุฉ Render
- `WEB_CONCURRENCY`: ุนุฏุฏ ุงูุนูููุงุช (2 ููุฎุทุฉ ุงููุฌุงููุฉ)
- `FLASK_ENV`: production

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### ุฎุทุฃ ุดุงุฆุน 1: "No module named 'wsgi'"
```bash
# ุชุฃูุฏ ูู ูุฌูุฏ ููู wsgi.py ูู ููุณ ุงููุฌูุฏ
ls wsgi.py
```

### ุฎุทุฃ ุดุงุฆุน 2: "application not found"
```python
# ุชุฃูุฏ ูู ุฃู wsgi.py ูุญุชูู ุนูู:
from app_simple import app
application = app
```

### ุฎุทุฃ ุดุงุฆุน 3: "Port already in use"
```bash
# ุบูุฑ ุงููููุฐ ุฃู ุฃููู ุงูุนูููุฉ ุงููุชุตุงุฑุนุฉ
gunicorn --bind 0.0.0.0:8000 wsgi:application
```

### ุฎุทุฃ ุดุงุฆุน 4: "Workers timeout"
```python
# ุฒุฏ ุงููููุฉ ุงูุฒูููุฉ ูู gunicorn_config.py
timeout = 60  # ุจุฏูุงู ูู 30
```

## ๐ฏ ูุตุงุฆุญ ููุฃุฏุงุก ุงูุฃูุซู:

### 1. ุนุฏุฏ ุงูุนูููุงุช ุงูููุงุณุจ:
- **CPU-bound**: ุนุฏุฏ ุงููุนุงูุฌุงุช
- **I/O-bound**: (ุนุฏุฏ ุงููุนุงูุฌุงุช ร 2) + 1

### 2. ููุน ุงูุนุงูู (Worker Class):
```python
worker_class = "sync"        # ููุชุทุจููุงุช ุงูุนุงุฏูุฉ
worker_class = "gevent"      # ููุชุทุจููุงุช ุนุงููุฉ ุงูุชุฒุงูู
worker_class = "eventlet"    # ููุชุทุจููุงุช ุงูุดุจููุฉ ุงูููุซูุฉ
```

### 3. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูููุงุช:
```python
max_requests = 1000          # ุฅุนุงุฏุฉ ุชุดุบูู ุจุนุฏ 1000 ุทูุจ
max_requests_jitter = 50     # ุนุดูุงุฆูุฉ ูุชุฌูุจ ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงููุชุฒุงูู
```

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก:

### ูุน ุงูุณุฌูุงุช:
```python
# ูู gunicorn_config.py
accesslog = "-"              # ุทุจุงุนุฉ ุณุฌู ุงููุตูู
errorlog = "-"               # ุทุจุงุนุฉ ุณุฌู ุงูุฃุฎุทุงุก
loglevel = "info"            # ูุณุชูู ุงูุณุฌู
```

### ูุฑุงูุจุฉ ุงูุนูููุงุช:
```bash
# ุนุฑุถ ุงูุนูููุงุช ุงูุฌุงุฑูุฉ
ps aux | grep gunicorn

# ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ
top -p $(pgrep -d',' gunicorn)
```

## ๐ ุฅุนุงุฏุฉ ุชุดุบูู Graceful:

```bash
# ุฅุนุงุฏุฉ ุชุดุบูู ูุงุนูุฉ (ูุง ุชูุทุน ุงูุงุชุตุงูุงุช ุงูููุฌูุฏุฉ)
kill -HUP $(pgrep gunicorn)

# ุฅุนุงุฏุฉ ุชุญููู ุงูููุฏ
kill -USR2 $(pgrep gunicorn)
```

## ๐ ุงูุฎูุงุตุฉ:

ุงูุขู ูุดุฑูุนู ุฌุงูุฒ ููุนูู ูุน Gunicorn ุจุดูู ุงุญุชุฑุงูู:

โ **ููู WSGI** ุตุญูุญ  
โ **ุฅุนุฏุงุฏุงุช Gunicorn** ูุญุณูุฉ  
โ **Procfile** ูุญุฏุซ  
โ **ุฌุงูุฒ ูููุดุฑ** ุนูู ุฃู ููุตุฉ  

---

**ุงุณุชุฎุฏู `gunicorn --config gunicorn_config.py wsgi:application` ููุชุดุบูู!** ๐