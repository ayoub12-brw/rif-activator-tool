<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RiF Activator A12+ | نظام تفعيل الأجهزة المتقدم</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#764ba2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="RiF Activator A12+">
    <link rel="apple-touch-icon" href="/static/icons/icon-192x192.png">
    <meta name="msapplication-TileColor" content="#764ba2">
    <meta name="msapplication-TileImage" content="/static/icons/icon-144x144.png">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="نظام تفعيل آمن وسريع لجميع أجهزة iOS A12+ مع ضمان الجودة والأمان المطلق">
    <meta name="keywords" content="iOS, iPhone, iPad, تفعيل, activation, A12, security, امان">
    <meta name="author" content="RiF Activator Team">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="RiF Activator A12+ - نظام تفعيل الأجهزة المتقدم">
    <meta property="og:description" content="تفعيل آمن وسريع لجميع أجهزة iOS A12+ مع ضمان الجودة والأمان المطلق">
    <meta property="og:image" content="/static/icons/icon-512x512.png">
    <meta property="og:url" content="https://rif-activator.com">
    <meta property="og:type" content="website">
    
    <!-- External Resources -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --shadow-light: 0 8px 32px rgba(31, 38, 135, 0.37);
            --neon-blue: #00d4ff;
            --neon-purple: #9b59b6;
            --dark-glass: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* خلفية متحركة */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: var(--primary-gradient);
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .shape:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 70%;
            left: 80%;
            animation-delay: 2s;
        }

        .shape:nth-child(3) {
            width: 60px;
            height: 60px;
            top: 50%;
            left: 20%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Header محسن */
        .header {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--glass-border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .header.scrolled {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            background: var(--secondary-gradient);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: var(--shadow-light);
        }

        .logo-text {
            color: white;
            font-size: 1.5rem;
            font-weight: 800;
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-item {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-item:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .nav-item.active {
            background: var(--secondary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        /* Hero Section متطور */
        .hero-section {
            padding: 4rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .hero-content {
            margin-bottom: 4rem;
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 900;
            color: white;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 20px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #fff, #00d4ff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(0, 212, 255, 0.5); }
            to { text-shadow: 0 0 30px rgba(0, 212, 255, 0.8); }
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            font-weight: 500;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-cta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .cta-button {
            background: var(--secondary-gradient);
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
            position: relative;
            overflow: hidden;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(76, 175, 80, 0.5);
        }

        .cta-button.secondary {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        /* الإحصائيات المتقدمة */
        .stats-section {
            padding: 4rem 0;
            background: var(--dark-glass);
            backdrop-filter: blur(10px);
        }

        .stats-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .stat-icon {
            font-size: 3rem;
            color: var(--neon-blue);
            margin-bottom: 1rem;
            display: block;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 900;
            color: white;
            display: block;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* قسم الميزات */
        .features-section {
            padding: 6rem 0;
        }

        .section-title {
            text-align: center;
            font-size: 3rem;
            font-weight: 800;
            color: white;
            margin-bottom: 1rem;
        }

        .section-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
            margin-bottom: 4rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .feature-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2.5rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .feature-icon {
            background: var(--secondary-gradient);
            color: white;
            width: 70px;
            height: 70px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
        }

        .feature-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1rem;
        }

        .feature-description {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        /* نموذج التفعيل المطور */
        .activation-section {
            padding: 6rem 0;
            background: var(--dark-glass);
            backdrop-filter: blur(10px);
        }

        .activation-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .activation-form {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 3rem;
            box-shadow: var(--shadow-light);
        }

        .form-group {
            margin-bottom: 2rem;
        }

        .form-label {
            display: block;
            color: white;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .form-input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--neon-blue);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .submit-button {
            width: 100%;
            background: var(--secondary-gradient);
            color: white;
            padding: 1.2rem;
            border: none;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(76, 175, 80, 0.5);
        }

        /* Footer */
        .footer {
            background: var(--dark-glass);
            backdrop-filter: blur(15px);
            border-top: 1px solid var(--glass-border);
            padding: 3rem 0;
            text-align: center;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .footer-text {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .social-link {
            background: var(--glass-bg);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: var(--secondary-gradient);
            transform: translateY(-3px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .nav-menu {
                display: none;
            }
            
            .hero-cta {
                flex-direction: column;
                align-items: center;
            }
            
            .cta-button {
                width: 100%;
                max-width: 300px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top: 4px solid var(--neon-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- خلفية متحركة -->
    <div class="animated-bg">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <span class="logo-text">RiF Activator A12+</span>
            </div>
            <nav class="nav-menu">
                <a href="/" class="nav-item active">الرئيسية</a>
                <a href="/check_device" class="nav-item">فحص الجهاز</a>
                <a href="/admin" class="nav-item">الإدارة</a>
                <a href="/reports" class="nav-item">التقارير</a>
                <a href="/api/docs" class="nav-item">API</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section" data-aos="fade-up">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">نظام تفعيل الأجهزة الأكثر تقدماً</h1>
                <p class="hero-subtitle">
                    تفعيل آمن وسريع لجميع أجهزة iOS A12+ مع ضمان الجودة والأمان المطلق
                </p>
                <div class="hero-cta">
                    <a href="#activation" class="cta-button">
                        <i class="fas fa-rocket"></i>
                        ابدأ التفعيل الآن
                    </a>
                    <a href="/check_device" class="cta-button secondary">
                        <i class="fas fa-search"></i>
                        فحص الجهاز
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Statistics Section -->
    <section class="stats-section" data-aos="fade-up">
        <div class="stats-container">
            <h2 class="section-title">إحصائيات النظام المباشرة</h2>
            <div class="stats-grid">
                <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
                    <i class="fas fa-mobile-alt stat-icon"></i>
                    <span class="stat-number" id="totalDevices">1,247</span>
                    <span class="stat-label">جهاز مفعل</span>
                </div>
                <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
                    <i class="fas fa-users stat-icon"></i>
                    <span class="stat-number" id="activeUsers">892</span>
                    <span class="stat-label">مستخدم نشط</span>
                </div>
                <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
                    <i class="fas fa-check-circle stat-icon"></i>
                    <span class="stat-number" id="successRate">98.7%</span>
                    <span class="stat-label">معدل النجاح</span>
                </div>
                <div class="stat-card" data-aos="zoom-in" data-aos-delay="400">
                    <i class="fas fa-clock stat-icon"></i>
                    <span class="stat-number" id="avgTime">2.3</span>
                    <span class="stat-label">دقيقة متوسط التفعيل</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section" data-aos="fade-up">
        <div class="hero-container">
            <h2 class="section-title">مميزات النظام</h2>
            <p class="section-subtitle">
                تقنيات متقدمة لضمان أفضل تجربة تفعيل ممكنة
            </p>
            <div class="features-grid">
                <div class="feature-card" data-aos="fade-right" data-aos-delay="100">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="feature-title">أمان عالي المستوى</h3>
                    <p class="feature-description">
                        حماية متقدمة للبيانات مع تشفير من الدرجة العسكرية وحماية شاملة ضد التلاعب
                    </p>
                </div>
                <div class="feature-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="feature-icon">
                        <i class="fas fa-lightning-bolt"></i>
                    </div>
                    <h3 class="feature-title">سرعة فائقة</h3>
                    <p class="feature-description">
                        تفعيل فوري للأجهزة خلال ثوانٍ معدودة مع استخدام خوارزميات محسّنة للأداء
                    </p>
                </div>
                <div class="feature-card" data-aos="fade-left" data-aos-delay="300">
                    <div class="feature-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <h3 class="feature-title">دعم شامل A12+</h3>
                    <p class="feature-description">
                        متوافق مع جميع أجهزة iOS الحديثة من معالج A12 إلى أحدث الإصدارات
                    </p>
                </div>
                <div class="feature-card" data-aos="fade-right" data-aos-delay="100">
                    <div class="feature-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3 class="feature-title">دعم فني 24/7</h3>
                    <p class="feature-description">
                        فريق دعم متخصص متاح على مدار الساعة لضمان حل أي مشكلة قد تواجهك
                    </p>
                </div>
                <div class="feature-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="feature-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <h3 class="feature-title">تحديثات تلقائية</h3>
                    <p class="feature-description">
                        نظام تحديث تلقائي لضمان أحدث تقنيات التفعيل والحماية من آبل
                    </p>
                </div>
                <div class="feature-card" data-aos="fade-left" data-aos-delay="300">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="feature-title">تحليلات متقدمة</h3>
                    <p class="feature-description">
                        لوحة تحكم شاملة مع إحصائيات مفصلة وتقارير دقيقة لمتابعة الأداء
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Activation Form Section -->
    <section class="activation-section" id="activation" data-aos="fade-up">
        <div class="activation-container">
            <h2 class="section-title">تفعيل الجهاز</h2>
            <p class="section-subtitle">
                أدخل الرقم التسلسلي لجهازك لبدء عملية التفعيل الآمنة
            </p>
            <form class="activation-form" id="activationForm">
                <div class="form-group">
                    <label class="form-label" for="serialNumber">
                        <i class="fas fa-barcode"></i>
                        الرقم التسلسلي للجهاز
                    </label>
                    <input 
                        type="text" 
                        id="serialNumber" 
                        name="serial" 
                        class="form-input"
                        placeholder="مثال: C8KV7Q2PH72Y"
                        required
                        maxlength="12"
                        pattern="[A-Z0-9]{12}"
                    >
                </div>
                <div class="form-group">
                    <label class="form-label" for="deviceModel">
                        <i class="fas fa-mobile-alt"></i>
                        طراز الجهاز
                    </label>
                    <select id="deviceModel" name="model" class="form-input" required>
                        <option value="">اختر طراز الجهاز</option>
                        <option value="iPhone X">iPhone X</option>
                        <option value="iPhone XS">iPhone XS</option>
                        <option value="iPhone XS Max">iPhone XS Max</option>
                        <option value="iPhone XR">iPhone XR</option>
                        <option value="iPhone 11">iPhone 11</option>
                        <option value="iPhone 11 Pro">iPhone 11 Pro</option>
                        <option value="iPhone 11 Pro Max">iPhone 11 Pro Max</option>
                        <option value="iPhone 12">iPhone 12</option>
                        <option value="iPhone 12 Mini">iPhone 12 Mini</option>
                        <option value="iPhone 12 Pro">iPhone 12 Pro</option>
                        <option value="iPhone 12 Pro Max">iPhone 12 Pro Max</option>
                        <option value="iPhone 13">iPhone 13</option>
                        <option value="iPhone 13 Mini">iPhone 13 Mini</option>
                        <option value="iPhone 13 Pro">iPhone 13 Pro</option>
                        <option value="iPhone 13 Pro Max">iPhone 13 Pro Max</option>
                        <option value="iPhone 14">iPhone 14</option>
                        <option value="iPhone 14 Plus">iPhone 14 Plus</option>
                        <option value="iPhone 14 Pro">iPhone 14 Pro</option>
                        <option value="iPhone 14 Pro Max">iPhone 14 Pro Max</option>
                        <option value="iPhone 15">iPhone 15</option>
                        <option value="iPhone 15 Plus">iPhone 15 Plus</option>
                        <option value="iPhone 15 Pro">iPhone 15 Pro</option>
                        <option value="iPhone 15 Pro Max">iPhone 15 Pro Max</option>
                    </select>
                </div>
                <button type="submit" class="submit-button">
                    <i class="fas fa-rocket"></i>
                    بدء التفعيل
                </button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">
                © 2024 RiF Activator A12+ | جميع الحقوق محفوظة | نظام تفعيل الأجهزة الأكثر أماناً
            </p>
            <div class="social-links">
                <a href="#" class="social-link">
                    <i class="fab fa-telegram"></i>
                </a>
                <a href="#" class="social-link">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="social-link">
                    <i class="fab fa-discord"></i>
                </a>
                <a href="#" class="social-link">
                    <i class="fab fa-github"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        // تهيئة AOS
        AOS.init({
            duration: 1000,
            easing: 'ease-in-out-sine',
            once: true
        });

        // تحديث الإحصائيات بالوقت الفعلي من الخادم
        function updateStats() {
            fetch('/api/live_stats')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const stats = data.stats;
                        
                        // تحديث العناصر مع تأثير متحرك
                        animateNumber('totalDevices', stats.total_devices);
                        animateNumber('activeUsers', stats.active_users);
                        document.getElementById('successRate').textContent = stats.success_rate;
                        document.getElementById('avgTime').textContent = stats.avg_time;
                    }
                })
                .catch(error => {
                    console.log('خطأ في تحميل الإحصائيات:', error);
                    // استخدم بيانات احتياطية في حالة الخطأ
                    updateStatsOffline();
                });
        }

        // تحديث الإحصائيات بدون اتصال
        function updateStatsOffline() {
            const stats = [
                { id: 'totalDevices', min: 1200, max: 1300 },
                { id: 'activeUsers', min: 850, max: 950 },
                { id: 'successRate', value: '98.7%' },
                { id: 'avgTime', min: 2.0, max: 3.0 }
            ];

            stats.forEach(stat => {
                const element = document.getElementById(stat.id);
                if (stat.value) {
                    element.textContent = stat.value;
                } else {
                    const randomValue = Math.floor(Math.random() * (stat.max - stat.min + 1)) + stat.min;
                    if (stat.id === 'avgTime') {
                        element.textContent = randomValue.toFixed(1);
                    } else {
                        element.textContent = randomValue.toLocaleString();
                    }
                }
            });
        }

        // تأثير متحرك للأرقام
        function animateNumber(elementId, targetNumber) {
            const element = document.getElementById(elementId);
            const currentNumber = parseInt(element.textContent.replace(/,/g, '')) || 0;
            
            if (currentNumber === targetNumber) return;
            
            const difference = targetNumber - currentNumber;
            const steps = 20;
            const stepValue = difference / steps;
            let currentStep = 0;
            
            const interval = setInterval(() => {
                currentStep++;
                const newValue = Math.round(currentNumber + (stepValue * currentStep));
                element.textContent = newValue.toLocaleString();
                
                if (currentStep >= steps) {
                    element.textContent = targetNumber.toLocaleString();
                    clearInterval(interval);
                }
            }, 50);
        }

        // تحديث الإحصائيات كل 5 ثوانٍ
        setInterval(updateStats, 5000);

        // تأثير التمرير للهيدر
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // معالج نموذج التفعيل
        document.getElementById('activationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const loadingOverlay = document.getElementById('loadingOverlay');
            const serialInput = document.getElementById('serialNumber');
            const modelSelect = document.getElementById('deviceModel');
            
            // التحقق من صحة البيانات
            if (!serialInput.value || !modelSelect.value) {
                alert('يرجى إدخال جميع البيانات المطلوبة');
                return;
            }

            // إظهار شاشة التحميل
            loadingOverlay.classList.add('active');

            // إرسال البيانات
            const formData = {
                serial: serialInput.value,
                model: modelSelect.value
            };

            fetch('/api/pay_register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                loadingOverlay.classList.remove('active');
                
                if (data.success) {
                    // عرض رسالة النجاح
                    showSuccessMessage(data.message || 'تم تفعيل الجهاز بنجاح!');
                    
                    // إعادة تعيين النموذج
                    serialInput.value = '';
                    modelSelect.value = '';
                } else {
                    showErrorMessage(data.error || 'حدث خطأ في عملية التفعيل');
                }
            })
            .catch(error => {
                loadingOverlay.classList.remove('active');
                console.error('Error:', error);
                showErrorMessage('حدث خطأ في الاتصال بالخادم');
            });
        });

        // عرض رسائل النجاح والخطأ
        function showSuccessMessage(message) {
            const notification = createNotification(message, 'success');
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 5000);
        }

        function showErrorMessage(message) {
            const notification = createNotification(message, 'error');
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 5000);
        }

        function createNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : '#f44336'};
                color: white;
                padding: 1rem 2rem;
                border-radius: 10px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                ${message}
            `;
            return notification;
        }

        // تحسين تجربة المستخدم
        document.addEventListener('DOMContentLoaded', function() {
            // تنعيم التمرير للروابط الداخلية
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // تحديث الإحصائيات عند تحميل الصفحة
            updateStats();
        });

        // تحسين الأداء
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('SW registered: ', registration);
                    })
                    .catch(function(registrationError) {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>